[[Category:Not booting]]
<!--

Will upload this image soon!

| image = File:CHANGE_ME_TO_DEVICE_CODENAME.jpg
| imagecaption = CHANGE_ME
-->
{{Infobox device
| manufacturer = Google
| name =  Pixel
| codename = sailfish, marlin
| releaseyear = 2016
| originalsoftware = Android 7.1 (Nougat)
| chipset = Qualcomm MSM8996 Snapdragon 821
| cpu = Quad-core (2x2.15 GHz Kryo & 2x1.6 GHz Kryo)
| gpu = Adreno 530
| storage = 32/128GB
| display = 5.0 inch AMOLED capacitive multi-touch screen, 1280x1920
| memory = 4GB Dual Channel LPDDR4
}}

== Contributors ==
* [https://gitlab.com/ojbr Oliver 'ojbr' Brammer]

== Maintainer(s) ==
* [mailto:oliver@octo.im Oliver 'ojbr' Brammer]

<!-- Only if this device doesn't run on linux-postmarketos yet! -->
<!-- This person needs to be willing to answer questions from users of this device -->

== Note on device codenames and compatibility ==

The sailfish variant of the Google Pixel shares the same kernel builds as the Pixel XL (marlin). Therefore, anything here referencing sailfish should also be relevant to marlin.

== What works ==

* Kernel compilation

== What does not work ==

* Booting kernel via fastboot
* Flashing (install script mods required, see below)
* Touch
* Screen
* WiFi
* Bluetooth
* Camera
* GPS
* Modem

Installation using normal measures does not successfully boot via the typical flashing method, however it is possible to direct boot to the initramfs without flashing.
The Pixel/Pixel XL also have encrypted partitions by default, which is troublesome for TWRP. The Pixels also differ from the standard Android boot partition format, since they have
two partition slots (dubbed slot A & B).

=== Partition Layout ===

<pre>
~#: fdisk -l /dev/block/sda


bootlocker_a    bootlocker_b
keymaster_a     keymaster_b
tz_a            tz_b
rpm_a           rpm_b
pmic_a          pmic_b
hyp_a           hyp_b
cmnlib32_a      cmnlib32_b
cmnlib64_a      cmnlib64_b
aboot_a         aboot_b
hosd_a          hosd_b
devcfg_a        devcfg_b
modem_a         modem_b
msadp_a         msadp_b
apdp_a          apdp_b
vendor_a        vendor_b
system_a        system_b
userdata
reserve0
</pre>

== How to enter flash mode ==

It is required that the device is '''cell carrier unlocked''' before attempting to perform an OEM unlock using fastboot.

* Enter fastboot by shutting down the device, and hold volume down + power until you see the fastboot screen.
* Depending on the phone's previous sleep state, you may be alerted that a RAM dump is in progress. Ignore these, keep holding the buttons until you end up in fastboot.

Once cell unlocked, you must OEM unlock from fastboot through the standard command:
<pre>
<nowiki>#fastboot oem unlock</nowiki>
</pre>

Be sure that you are using fastboot slot A. If you need to change slots, perform:
<pre>
<nowiki>#fastboot set_active a
#fastboot reboot bootloader</nowiki>
</pre>

At this point, you should be ready to test pmOS deployments.

== Installation ==

More details to this section are coming soon.
<!-- add more sections below as necessary, e.g. Wifi, photos, ... -->
=== Untested steps ===

Take precaution here, and keep backups. This section is all theoretical and has not been tested as of writing.

* [https://twrp.me/google/googlepixel.html Download the latest TWRP (both img and zip)]
* From the TWRP directory, run the fastboot command: <pre>#fastboot boot <nowiki><your-twrp.img></nowiki></pre>
* At this point, TWRP will load
* Be sure that slot A is active before continuing:
<pre><nowiki>
#fastboot set_active a
#fastboot reboot bootloader
#fastboot reboot recovery
</nowiki></pre>

== Serial Debugging ==

Sounds like this is possible, given kernel has serial debugging enabled.

http://www.viruss.eu/malware/practical-android-debugging-via-kgdb/

Should also be possible with a [[Serial debugging|Nexus Serial debug cable]]. Awaiting a parts delivery for this.

Must be enabled via fastboot first:
<pre>
fastboot oem uart enable
</pre>

== To Do List ==

=== Doing ===

* [ojbr] - Investigate serial debugging. Obtained a USB FTDI device, just need to hack together a 3.5mm TRRS cable

=== Backlog === 

* Re-enable LZMA kernel image compression, add via makedepends
* Test device flashing using fastboot
* Investigate Kernel upgrade path to 4.X where MSM8996 has better support in mainline

== See also ==
* [https://gitlab.com/ojbr/pmbootstrap/tree/wip-google-pixel ojbr's postmarketOS google-pixel fork on GitLab]
<!--
Link to related GitHub issues or pull requests like the following (replace CHANGEME with the ID, e.g. 1234):
* {{github|CHANGEME}} Initial pull request
* {{github|CHANGEME}} Some related issue
You can also add normal web links:
* [https://redmine.replicant.us/projects/replicant/wiki/GalaxyS2I9100 Replicant wiki page]
-->
