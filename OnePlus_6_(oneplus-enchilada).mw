{{Infobox device
| manufacturer = OnePlus
| name = 6/6T
| codename = oneplus-enchilada, oneplus-fajita
| image = File:Oneplus-6-phosh-neofetch.jpg
| imagecaption = Running phosh!
| releaseyear = 2018
| originalsoftware = Android 8.0 (Up to Android 10) on Linux 4.9
| chipset = Qualcomm SDM845 Snapdragon 845
| cpu = Octa-core (4x 2.8 GHz Kryo 385 Gold & 4x 1.7 GHz Kryo 385 Silver)
| gpu = Adreno 630
| storage = 64/128/256 GB
| display = 1080 x 2280 / 1080 x 2340 AMOLED
| memory = 6/8 GB
| architecture = aarch64
<!-- the following status_* questions should be answered with Y - yes, P - partial, N - no, or left blank (for untested or unknown) -->
| status_usbnet = Y
| status_flashing = Y
| status_touch = Y
| status_screen = Y
| status_wifi = Y
| status_xwayland = Y
| status_fde = N
| status_mainline = Y
| status_battery = P
| status_3d = P
| status_accel = N
| status_audio = N
| status_bluetooth = N 
| status_camera = N
| status_gps = N
| status_mobiledata = N 
| status_sms = N
| status_calls = N
| status = Mainline booting, DSI panel mode up and running with freedreno!
| booting = yes
| pmoskernel = 5.7.0-rc6
| whet_dhry = 4100
| status_otg = Modified DTS
}}
== About ==
This page describes the support for mainline on the OnePlus 6/T.

Video of OnePlus 6 booting into phosh [https://streamable.com/w8wtuw here]!

== Users owning this device ==
{{Device owners}}
== Contributors ==

* [https://wiki.postmarketos.org/wiki/User:Kalube Kalube]

== Mainline Kernel ==

Mainline kernel is up and running, with more and more hardware being added constantly.

* Touch works! Although currently relies on a bitbang i2c implementation that is driven by the CPU instead of dedicated GENI hardware, this will be fixed when GPI mode gets added to mainline.
* USB networking works (dual role / host mode needs some work).
* Buttons (power/vol/tri-state) all function (seem to have stopped working for me, can someone else test?)
* Modem boots up but ofonoctl doesn't detect any sim slots - need to us msm-modem package and rpmsgexport, currently WIP.
* Wifi is functional! Although there is a [https://gitlab.com/sdm845-mainline/sdm845-linux-next/-/commit/7f485ed31b6e66e32cc3bdc385fc95532fc531a6 normally fatal error that must be ignored] in order for the drivers to successfully probe.

== Installing == 

<code>pmbootstrap init</code>, pick enchilada / fajita device depending on your taste :D

Most UIs work well, phosh is quite good, plasma mobile does seems to be more buggy.
For phosh set <code>scale=3</code> in <code>/etc/phoc/phosh.ini</code> under DSI-1 to fix scaling.

Now run the following to build and flash:
<pre>
pmbootstrap install --split
pmbootstrap export
</pre>
Reboot back into bootloader mode after each of the following commands, replacing enchilada with fajita where appropriate.
<pre>
fastboot erase dtbo
fastboot flash vendor /tmp/postmarketOS-export/oneplus-enchilada-boot.img
fastboot flash system /tmp/postmarketOS-export/oneplus-enchilada-root.img
fastboot flash boot /tmp/postmarketOS-export/boot.img-oneplus-sdm845
</pre>

Reboot and you should see dmesg on your screen :D

If you have flashing or booting issues, try first flashing the latest OxygenOS to the slot you want to install postmarketOS to (ie, flash in TWRP from your other slot). If you still have no luck, try flashing OOS 9 as the bootloader can be more forgiving.

It is possible to dual boot with android by following the guide above and using

<code>fastboot --set-active=[a|b]</code>

to switch to your inactive slot before flashing.

== Sources ==
[https://github.com/calebccff/linux/commits/enchilada-usb Kernel sources]

== How to enter flash mode ==

Unplug from USB, hold {{Button|Power}} and {{Button|Volume Up}} until you see "Fastboot Mode" text.

== See also ==
* {{MR|1221|pmaports}} Initial merge request.
* {{MR|1271|pmaports}} Updates to add panel mode and WiFi support.
<!-- * {{issue|CHANGEME|pmaports}} Some related issue -->

If you manage to get your device packages merged, uncomment links below and change DEVICE_CODENAME with the actual one.
* [https://gitlab.com/postmarketOS/pmaports/tree/master/device/testing/device-oneplus-enchilada Enchilada device package]
* [https://gitlab.com/postmarketOS/pmaports/tree/master/device/testing/device-oneplus-fajita Fajita device package]
* [https://gitlab.com/postmarketOS/pmaports/tree/master/device/testing/linux-oneplus-sdm845 Kernel package]
