= Generic debugging steps =

==== Setting the resolution for the framebuffer ====
The resolution for the framebuffer might not be set to the correct resolution for the display panel in the device. In some cases this command will also manually refresh the panel (like for the hammerhead)

<syntaxhighlight lang="shell-session">
$ cat /sys/class/graphics/fb0/modes > /sys/class/graphics/fb0/mode
</syntaxhighlight>

==== Changing the panning ====
Some devices might have a framebuffer virtual size thats twice as big as the panel resolution, this is a common double buffering method. The application renders to one side of the display while the panning is set to
the other side. You can try changing the panning with the `panning` file in the sysfs directory.

<syntaxhighlight lang="shell-session">
$ cat /sys/class/graphics/fb0/virtual_size
todo: add file contents here
$ cat /sys/class/graphics/fb0/pan
todo: add file contents here
$ echo 0 0 > /sys/class/graphics/fb0/pan
</syntaxhighlight>

= Qualcomm framebuffer (mdss, mdp3) =

==== MSM framebuffer doesn't work ====

We found out that removing the 3D driver support makes the MSM framebuffer. See [https://github.com/postmarketOS/pmbootstrap/pull/66 #66].

<pre>CONFIG_MSM_KGSL=n</pre>

==== Screen output flicker and inactivity ====

If you notice a very brief flicker upon boot, but immediately disappears and screen turns black, you might have a buggy framebuffer Qualcomm MDSS MDP3 driver.

You can try patching the source code by removing the function assigned to the <code>mdp3_interface->off_fnc</code> in the <code>mdp3_ctrl.c</code> file.

See example patch: [https://github.com/postmarketOS/pmbootstrap/blob/master/aports/device/linux-huawei-y530/05_fix_mdp3_ctrl_off.patch 05_fix_mdp3_ctrl_off.patch]

==== Screen output messed up ====

If the output on the screen is not aligned correctly ([https://user-images.githubusercontent.com/315080/30261765-c28df28e-96d6-11e7-971a-fd031704a810.jpg see picture]) it's probably because you have a wrong value in <code>/sys/class/graphics/fb0/bits_per_pixel</code>.

You can try patching the source code by setting a different video mode (RGB/ARGB/RGBA/YCRYCB/...).

See example patch: [https://github.com/postmarketOS/pmbootstrap/blob/master/aports/device/linux-huawei-y530/06_fix_mdss_fb_rgb_mode.patch 06_fix_mdss_fb_rgb_mode.patch]

==== My screen is red! ====

There are some buggy framebuffer drivers (e.g. in LG Nexus 5) that report incorrect data. You can override it with:

<pre>weston --pixman-type=2</pre>
More information on [https://github.com/postmarketOS/pmbootstrap/issues/54 issue #54]
