{{note|Right now we use the QEMU version installed on the host system, but we want to change that: {{github|1158}}}}
=== Building and starting a QEMU image ===

<pre class="shell">pmbootstrap init  # Choose a qemu-* device (x86_64: amd64, arm: vexpress-soc)
pmbootstrap install --no-fde
pmbootstrap qemu --image-size=2G</pre>
''Note: The <code>amd64</code> version is recommended if you don't know which one to choose. See the device specific pages (links below) for the differences.''

The <code>--image-size=2G</code> parameter will increase the image size to 2GB, so you don't instantly run out of space (by default the image size is as small as possible). Check out <code>pmbootstrap qemu --help</code> for more options, such as performance tweaks.

=== Qemu on Debian stretch ===

Qemu on Debian does not include SDL-support by default. To use pmbootstrap on Debian you have to do the following:
# Ensure that /etc/apt/sources.list contains a deb-src line for your distribution.
# <code>apt-get source qemu</code> (get the source code for the Debian package)
# <code>cd qemu-*</code>
# In debian/rules change common_configure_opts such that the line <code>--extra-ldflags="$(LDFLAGS) -Wl,--as-needed" \</code> to <code>--extra-ldflags="$(LDFLAGS) -Wl,--as-needed,-rpath-link,/lib/x86_64-linux-gnu" \</code> and add <code>"--enable-sdl --with-sdlabi=2.0 \</code> as the following line.
# <code>apt-get build-dep qemu</code> (get build dependencies for qemu)
# <code>fakeroot debian/rules binary</code> (compile the package)
# Install the appropriate Debian packages which have been created in ..

=== See also ===

* [[qemu-amd64-(QEMU-for-x86_64)|Qemu for x86_64]]
* [[qemu-vexpress-(Qemu-with-vexpress-soc)|Qemu for arm]]
* [[QEMU_aarch64_(qemu-aarch64_)|Qemu for aarch64]]
