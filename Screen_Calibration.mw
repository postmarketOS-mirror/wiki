== Framebuffer ==

On most Android devices, a somewhat working framebuffer is required to get Weston and other Wayland compositors running. The alternative to framebuffer would be [[Glossary#dri|DRI]].

If your framebuffer does not work out of the box, try the following:

* Boot TWRP/Android and read out the correct framebuffer configurations from the /sys... paths and try to set them in pmOS
* If you made it work, create an initfs hook, that instantly sets the framebuffer right. [https://github.com/postmarketOS/pmbootstrap/blob/ad17254e86b7dab4f87e139eaeb298222f37a031/aports/device/device-lg-mako/initfs-hook.sh Example]

If the screen looks laggy, it might be a known issue with refresh rate. It can be solved by hardcoding the refresh rate in the video driver, see [https://github.com/postmarketOS/pmbootstrap/blob/ad17254e86b7dab4f87e139eaeb298222f37a031/aports/device/linux-sony-amami/mdss_fb_refresh_rate.patch mdss_fb_refresh_rate.patch].

== Weston ==
{{syslog|weston}}

* Make sure, that Weston runs on the device
* Look in the logs (via SSH) for the touch device name. For <code>lg-mako</code>, the name is <code>touch_dev</code>, but it may be different for your device.
* Copy [https://github.com/postmarketOS/pmbootstrap/blob/master/aports/device/device-lg-mako/90-android-touch-dev.rules 90-android-touch-dev.rules] from <code>device-lg-mako</code> to your device's aport. Replace <code>touch_dev</code> with your touch device name. Adjust the <code>APKBUILD</code>, so it gets installed properly ([https://github.com/postmarketOS/pmbootstrap/blob/master/aports/device/device-lg-mako/APKBUILD Example])

<pre>
SUBSYSTEM==&quot;input&quot;, ATTRS{name}==&quot;touch_dev&quot;, \
ENV{ID_INPUT}=&quot;1&quot;, ENV{ID_INPUT_TOUCHSCREEN}=&quot;1&quot;
</pre>
Reload udev rules:

<source lang="bash"># Reload all rules
udevadm control --reload
# Re-apply those rules on all devices
udevadm trigger</source>
* This calibration will probably just work fine. If it does, you are done here, otherwise read on.

=== weston-calibrator (needed for resistive touch screens) ===
* Connect to your phone via SSH
* Run <code>weston-calibrator</code>
* Adjust your udev rules-file to the output from <code>weston-calibrator</code> ([https://github.com/postmarketOS/pmbootstrap/blob/bf6f5cb884d9e2eb8c684bb04f9c3e9d634278f8/aports/device/device-nokia-rx51/udev/90-touchscreen-dev.rules example]).
