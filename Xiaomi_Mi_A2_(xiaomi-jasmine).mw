{{Infobox device
| manufacturer = Xiaomi
| name = Mi A2
| codename = xiaomi-jasmine_sprout
| image = File:xiaomi-jasmine.jpg
| imagecaption = Xiaomi Mi A2
| releaseyear = 2018
| originalsoftware = Android 8.1
| pmoskernel = 4.4.226
| chipset = Qualcomm SDM660 Snapdragon 660
| cpu = 8-core (4x 2.2 GHz Kryo 260 & 4x 1.8 GHz Kryo 260)
| gpu = Adreno 512
| storage = 32/64/128 GB
| display = 1080 x 2160 LTPS IPS LCD
| memory = 4/6 GB
| architecture = aarch64
| status_usbnet = Y
| status_flashing = Y
| status_touch = Y
| status_screen = Y
| status_wifi = N
| status_xwayland = P
| status_fde = <!-- When installing with full disk encryption, can you type in the password with the on screen keyboard? -->
| status_mainline = N
| status_battery = 
| status_3d = N
| status_accel = N
| status_audio = N
| status_bluetooth = N
| status_camera = N
| status_gps = N
| status_mobiledata = N
| status_sms = N
| status_calls = N
| status = Booting
| booting = yes

<!-- you can also use these lines if you need to:
Version of the kernel that pmos is running
| pmoskernel = 3.x.x
see Unixbench page on wiki
| whet_dhry = 0.0
Is OTG available, not used in wiki
| status_otg = -
-->
}}

== Contributors ==
* [[User:robante15|robante15]]
* [[User:Profmagija|Profmagija]]

== Maintainer(s) ==
<!-- Only if this device doesn't run on linux-postmarketos yet! -->
<!-- This person needs to be willing to answer questions from users of this device -->

== Users owning this device ==
{{Device owners}}
<!-- autogenerated, use {{Owns device|devicepage|notes}} on your profile page -->
<!-- use _ instead of spaces in device page name, e.g. {{Owns device|HTC_Desire_(htc-bravo)|custom notes}}-->
<!-- you may need to purge page cache to see changes (more->purge cache)-->
<!-- you can use {{My devices}} on your profile page to show table with all your devices -->

== Notes ==
This device is quite similar to the [[Xiaomi Redmi Note 7 (xiaomi-lavender)]] and [[Xiaomi Redmi Note 8T (xiaomi-willow)]], and many of the issues were solved with steps from that devices pages, so if you're hacking on the Mi A2 it's a good idea to read the xiaomi-lavender and the xiaomi-willow page closely.

=== LED / Torch / Screen brightness / Vibrator  ===

Write brightness or boolean value to specific sysfs files:

* Front panel LED light [0-255]: <code>/sys/class/leds/white/{brightness,blink}</code>
* Torch light [0-255]: <code>/sys/class/leds/flashlight/brightness</code> (torch_0 is cold light, torch_1 is warm light)
* Screen brightness [0-255]: <code>/sys/class/leds/lcd-backlight/brightness</code>
* Vibrator [Miliseconds]: <code>/sys/class/timed_output/vibrator/enable</code>

'''Example:'''
<code>echo 255 > /sys/class/leds/lcd-backlight/brightness</code>
That maximizes the brightness of the screen

== How to enter flash mode ==
=== Bootloader Unlocking ===
Because this device is an Android One device, it can be unlocked using <code>fastboot oem unlock</code> from fastboot mode.

=== Recovery mode ===
* Turn the device off (or restart also works)
* Hold {{button|Volume Up}} and {{button|Power}} button
* Once you feel vibration and phone turns on, release {{button|Power}} button
* Keep holding {{button|Volume Up}} until you get to recovery.

=== Flashing (Download, Fastboot) mode ===
* Same as recovery, but this time hold the {{button|Volume Down}} and {{button|Power}} keys.

== Installation ==

* [[Installing pmbootstrap|Install pmbootstrap.]]
* Download the device/linux package from [https://github.com/robante15/mia2_pmaports my Github] (because it is not merged) and paste it into your pmaports/device folder. 
* <code>pmbootstrap -y zap; pmbootstrap init</code>, choose <code>xiaomi-jasmine_sprout</code> as your device
** Weston, XFCE4, and GNOME have been successfully tested. Phosh and Plasma Mobile do not work
* <code>pmbootstrap install</code>
* Enter fastboot, plug USB into computer
* <code>pmbootstrap flasher flash_kernel</code>
* <code>pmbootstrap flasher flash_rootfs</code>
* <code>pmbootstrap flasher flash_vbmeta</code>
* Reboot, sometimes <code>fastboot reboot</code> works, otherwise hold down {{button|Power}} until it reboots to system.
* Hopefully weston comes up with <code>postmarketos-demos</code>.
* <code>ssh user@172.16.42.1</code>

== Additional Info ==

Info from the Xiaomi Redmi Note 7, and Redmi Note 8 port that also applies to the Mi A2:

* [[Xiaomi Redmi Note 7 (xiaomi-lavender)]]
* [[Xiaomi Redmi Note 8T (xiaomi-willow)]]
* [[USB Internet]]

== See also ==
<!--
Link to related GitLab issues or merge requests like the following (replace CHANGEME with the ID, e.g. 1234):
* {{MR|CHANGEME|pmaports}} Initial merge request
* {{issue|CHANGEME|pmaports}} Some related issue
You can also add normal web links:
* [https://redmine.replicant.us/projects/replicant/wiki/GalaxyS2I9100 Replicant wiki page]
-->
<!--
If you manage to get your device packages merged, uncomment links below.
* {{Device package|xiaomi-jasmine}}
* {{Kernel package|xiaomi-jasmine}}
-->

* [https://github.com/xiaomi-sdm660/android_kernel_xiaomi_sdm660 Kernel used as downstream kernel source for jasmine_sprout]
* [https://github.com/robante15/mia2_pmaports Xiaomi Mi A2 Linux and Device Package]
