{{Infobox device
| manufacturer = PINE64
| name = PinePhone
| codename = pine64-pinephone
| image = File:Pinephone-final.jpeg
| imagecaption = A PinePhone with a case
| releaseyear = 2019
| originalsoftware = Linux 5.3.0
| pmoskernel = 
| chipset = Allwinner A64
| cpu = 4x 1152 MHz Cortex-A53
| gpu = Mali 400
| memory = 2 GB
| architecture = aarch64
| n-android =  âœ”
| whet_dhry = 
| status_usbnet = 
| status_flashing = -
| status_touch = Y
| status_screen = Y
| status_wifi = Y
| status_xwayland = Y
| status_fde = N
| status_mainline = Y
| status_battery = Y
| status_3d = Y
| status_accel = Y
| status_audio = Y
| status_bluetooth = N
| status_camera = Y
| status_gps = Y
| status_mobiledata = Y
| status_sms = N
| status_calls = N
| status_otg = N
| status = Boots
| booting = yes
}}

=== Contributors ===
* ''[[user:MartijnBraam|MartijnBraam]]''
* ''[[user:Z3ntu|z3ntu]]''
* ''[[user:bshah|bshah]]''

== Installation ==

The recommended installation procedure is installing to a microSD card by passing --sdcard=/dev/... to pmbootstrap install. The pinephone will boot to the microSD card first if it's bootable, or the eMMC if not. postmarketOS may be installed onto the eMMC by running pmbootstrap install --sdcard=/dev/mmcblk... from a Linux distribution booted via the microSD card.

== Serial console ==
The PinePhone has a serial port in the headphone connector, it's activated by the 6th contact on the dipswitch. If the switch is on then the headphone connector is in audio mode, if it's off then it's in UART mode.

The uart is 115200n8

The pinout for the serial connector on the tablet side is:

* Tip: RX
* Ring: TX
* Sleeve: GND

The serial connection is 3.3V

You can also buy the debug cable from [https://store.pine64.org PINE64 Store]

[[File:PinePhone-main-board.jpg|frameless]]

== Hardware switches ==

There's a 6 contact dipswitch on the back of the phone underneath the back cover. The 6 switches are for enableing/disableing hardware components. The switch has tiny numbers 1-6 beneath the contacts, moving the contact up sets that contact on. 

{| class="wikitable"
! #
! Off
! On
|-
| 1
| Modem disabled
| Modem enabled
|-
| 2
| Wifi/BT disabled
| Wifi/BT enabled
|-
| 3
| Microphone disabled
| Microphone enabled
|-
| 4
| Rear camera disabled
| Rear camera enabled
|-
| 5
| Front camera disabled
| Front camera enabled
|-
| 6
| Headphone UART mode
| Headphone audio mode
|}

== Expansion port ==

There is a 2x3 grid of pogo pins on the back of the pinephone for connecting a back cover with extra hardware like an extended battery case or a keyboard case. The pinout for this connector:

{| class="wikitable"
| Interrupt
| I2C
| I2C
|-
| 3v3
| usb 5v
| gnd
|}

the USB5v line is meant to charge the phone and the 3v3 is to power peripherals to the phone. The I2C and interrupt lines have pull-ups on the phone side.

== Components ==

{| class="wikitable"
! Component
! Model
! Driver
|-
| Touchscreen
| Goodix
| TOUCHSCREEN_GOODIX
|-
| Rear camera
| OmniVision OV5640
| VIDEO_OV5640
|-
| Camera flash
| SGMICRO SGM3140
| LEDS_SGM3140
|-
| Front camera
| GalaxyCore GC2145
| Nope
|-
| LCD
| Xingbangda XBD599
| CONFIG_DRM_PANEL_XINGBANGDA_XBD599
|-
| WiFi
| Realtek RTL8723CS
| RTL8723CS
|-
| Bluetooth
| Realtek RTL8723CS
| BT_HCIUART_RTL
|-
| Modem
| Quectel EC25-E
| USB_NET_QMI_WWAN
|-
| GNSS/GPS
| Quectel EC25-G
| CONFIG_USB_SERIAL_OPTION
|-
| Magnetometer
| ST LIS3MDL
| IIO_ST_MAGN_3AXIS
|-
| Ambient light / Proximity
| SensorTek STK3335
| STK3310
|-
| Sixaxis
| InvenSense MPU-6050
| INV_MPU6050_I2C
|-
| Vibration motor
| ?
| INPUT_GPIO_VIBRA
|-
| Notification LED
| LED0603RGB
| LEDS_GPIO
|-
| Volume buttons
| Buttons connected to the KEYADC
| KEYBOARD_SUN4I_LRADC
|-
| Power button
| X-Powers AXP803
| INPUT_AXP20X_PEK
|-
| Battery fuel gauge
| X-Powers AXP803
| BATTERY_AXP20X
|}


=== Cameras ===

The camera's both share the csi-0 bus. Currently only the rear camera (OV5640) has mainline linux support.

It's also not clear how the camera switching would work on the software side, maybe Linux just deals with it if the device tree nodes for the second camera get added.

The camera hardware pipeline is controlled with <code>/dev/media0</code> and <code>media-ctl</code>, the result is on <code>/dev/video0</code>

<source lang="shell-session">
pine-dontbeevil:~# media-ctl --set-v4l2 '"ov5640 2-003c":0[fmt:UYVY8_2X8/1280x720]'
pine-dontbeevil:~# ffmpeg -s 1280x720 -f video4linux2 -i /dev/video0 -vframes 1 selfie.jpg
</source>

[[File:PinePhone-rearcam-dev.png|frameless]]

=== Camera Flash ===

The camera flash consist out of a SG Micro SGM3140 "500mA Buck/Boost Charge Pump LED Driver" and a EHP-C04 LED.

The driver supports Flash and Torch mode, the first being brighter but only for about 300ms, when it switches to Torch mode. Torch mode is lower brightness but can be turned on continuously.

<source lang="shell-session">
# Turn on Flash, wait 0.3s, turn off
echo 1 > /sys/class/leds/sgm3140-flash/flash_strobe
sleep 0.3
echo 0 > /sys/class/leds/sgm3140-flash/flash_strobe
</source>

<source lang="shell-session">
# Turn on Torch
echo 1 > /sys/class/leds/sgm3140-flash/brightness
# Turn off Torch
echo 0 > /sys/class/leds/sgm3140-flash/flash_strobe
</source>


=== WiFi ===

?

=== Bluetooth ===

There is a patch series on lkml. A v2 for this series is in progress.

=== Modem ===

Receiving text messages works. Calls should work too but weren't tested yet.

=== Sensors ===

All sensors work and are accessible as Industrial I/O (iio) devices in linux. To query the data you can cat the files in `/sys/bus/iio/` to make the kernel module query the sensors

<source lang="shell-session">
dontbeevil:~# cat /sys/bus/iio/devices/iio\:device0/name
mpu6050
dontbeevil:~# cat /sys/bus/iio/devices/iio\:device0/in_accel_z_raw
-17594
dontbeevil:~# echo "Verified gravity still exists"
</source>

=== RGB Led ===

<source lang="shell-session">
# Activate LED
echo 1 > /sys/class/leds/$COLOR/brightness
# Deactivate LED
echo 0 > /sys/class/leds/$COLOR/brightness
</source>

=== Audio ===

==== Speakers ====

Sound output should work after unmuting <code>AIF1 Slot 0 digital</code>


== See also ==
* {{MR|308|pmaports}} Initial merge request
