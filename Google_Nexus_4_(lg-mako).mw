{{Infobox device
| manufacturer = Google (LG)
| name = Nexus 4
| codename = mako
| image = File:LG Nexus 4 Weston.png
| imagecaption = LG Nexus 4 running Weston
| releaseyear = 2012
| originalsoftware = Android on Linux 3.4
| chipset = Qualcomm APQ8064 Snapdragon S4 Pro
| cpu = Quad-core 1.5 GHz Krait
| gpu = Adreno 320
| storage = 8/16 GB
| display = 768x1280 IPS
| memory = 2 GB
}}
== Contributors ==

* ollieparanoid
* PabloCastellano and robb4 on IRC: Workaround for red screen bug ({{github|54}})

== Installation ==
<pre>
pmbootstrap init
pmbootstrap install
(enter fastboot, see below)
pmbootstrap flasher flash_system
pmbootstrap flasher boot
</pre>

To flash the kernel, you can choose <code>pmbootstrap flasher flash kernel</code> (but charging and power off doesn't work as expected anymore, see below).

== Entering &quot;Fastboot mode&quot; ==

Hold <code>Volume Down</code> + <code>Power</code>, let go of <code>Power</code> once the device display does something (e.g. turns from battery icon to black screen).

== Charging and power off (after flashing the postmarketOS kernel) ==
{{note|You don't have to flash the kernel! <code>pmbootstrap flasher boot</code> is also working!}}
You can flash the postmarketOS kernel, but instead of charging the battery, it will boot straight into postmarketOS (or the on screen keyboard to type in the password). Right now, the best way to charge it from that situation is to boot the recovery TWRP.

You can properly turn the device off by unplugging the usb cable, then booting into fastboot, then choosing power off.

== What works ==

* Touchscreen
* Weston (has the red screen bug, but we have a workaround for that now üëç )

== What does not work ==

* XWayland
* fbsplash only displays splash images very shortly, then goes to black screen
* osk-sdl has graphical bugs (but it works for unlocking!) ({{github|59|osk-sdl}})
* The rest (Wifi, bluetooth, making calls, ...)

== Wifi ==
Looks like, we need to package the [https://github.com/LineageOS/android_device_lge_mako/blob/12ac6e9aeb32d5ac9fc832f2214ede2c7690d0a6/proprietary-blobs.txt#L152-L157 wcnss.* files] for wifi. A version from 2015 can be found [https://github.com/TheMuppets/proprietary_vendor_lge/tree/cm-14.1/mako/proprietary/vendor/firmware here]. It's a Qualcomm chip.

== freedreno / Mainline ==
The [https://github.com/freedreno/freedreno/wiki freedreno] project brings an open source kernel driver for 3D acceleration. You would still need to run the proprietary blob on the GPU, but it makes 3D acceleration possible at all. There is a backport of freedreno to the 3.4 kernel, but the display doesn't work there. According to robclark from Freedreno, it makes more sense to get [[The Mainline Kernel|mainline]] going:

: ''tbh, with the exception of perhaps making phone calls (modem), upstream support for 8064 should be decent (like the work that john stultz did on n7 tablet).. so I probably wouldn't try too hard on ancient 3.4 stuff''

Let us know if you're interested in doing this and talk to opendata26 (from postmarketOS) and robclark (from freedreno). With their help it should be quite feasible.

== Links ==
* [https://github.com/freedreno/freedreno/wiki/Nexus-4 freedreno: Nexus 4]
* [https://github.com/postmarketOS/pmbootstrap/tree/master/aports/device/device-lg-mako Device package]
* [https://www.optiv.com/blog/building-a-nexus-4-uart-debug-cable Tutorial: UART debug cable]
* [https://developers.google.com/android/drivers#mako Official proprietary drivers]

== Photos ==

* [https://ollieparanoid.github.io/img/2017-05-26/mako/editor.jpg Weston running with framebuffer issues]
* [https://cloud.githubusercontent.com/assets/6033024/26761940/2e3273e0-4928-11e7-8800-0b4ddb14e239.jpg robb4 patched Weston to display the right colors]
