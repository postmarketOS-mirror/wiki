{{Infobox device
| manufacturer = Google (ASUS)
| name = Nexus 7 (2012)
| codename = asus-grouper & asus-tilapia
| image = File:Nexus 7 2012 weston.jpg
| imagecaption = Google Nexus 7
| releaseyear = 2012
| originalsoftware = Android 4.1.2 on Linux 3.0
| chipset = Nvidia Tegra 3
| cpu = Quad-core 1.2 GHz Cortex-A9
| gpu = ULP GeForce
| storage = 8/16/32 GB
| display = 800x1280 IPS
| memory = 1 GB
| architecture = armhf
| status_usbnet = Y
| status_flashing = Y
| status_touch = Y
| status_screen = Y
| status_wifi = Y
| status_xwayland = Y
| status_fde = 
| status_mainline = P
| status_battery = Y
| status_3d = 
| status_accel = 
| status_audio = Y
| status_bluetooth =
| status_camera =
| status_gps = 
| status_mobiledata = -
| status_sms = -
| status_calls = -
| booting = yes
}}
== Contributors ==
* antonok
* pangelo
* okias

=== Users owning this device ===
{{Device owners}}


=== How to enter flash mode ===
* Connect a USB cable
* Power the device off
* Hold power + volume down
* <code>fastboot</code> should work when the green android appears on the screen

=== Installation process (legacy kernel) ===
<syntaxhighlight lang="shell" line='line'>
$ git clone https://gitlab.com/postmarketOS/pmbootstrap.git
$ cd pmbootstrap
$ ./pmbootstrap.py init
$ ./pmbootstrap.py install
$ ./pmbootstrap.py flasher flash_kernel
$ ./pmbootstrap.py flasher flash_rootfs
</syntaxhighlight>

=== Installation process (development setup, cutting edge) ===
This includes latest mainline kernel (no touchscreen support yet, 2019-12-09):
<syntaxhighlight lang="shell" line='line'>
mkdir ~/code
cd ~/code
git clone https://gitlab.com/postmarketOS/pmbootstrap.git
cd pmbootstrap
alias pmbootstrap=~/code/pmbootstrap/pmbootstrap.py
pmbootstrap init
# pmbootstrap initfs hook_add debug-shell # not required, only for debugging
pmbootstrap export
pmbootstrap chroot -- apk add abootimg android-tools mkbootimg dtbtool findutils
export DEVICE="$(pmbootstrap config device)"
export WORK="$(pmbootstrap config work)"
export TEMP="$WORK/chroot_native/tmp/mainline/"
mkdir -p "$TEMP"

cd ~/code
git clone https://github.com/grate-driver/linux.git
cd linux
source ~/code/pmbootstrap/helpers/envkernel.sh

sudo curl -o .output/.config http://dpaste.com/1YBCBMN.txt # download prepared config file
pmbootstrap initfs extract # ugly hack to get kernel booting without external initrd
sudo cp -r ~/.local/var/pmbootstrap/chroot_rootfs_asus-grouper/tmp/initfs-extracted ./output/ # initfs is later compiled into kernel

make -j5

cd ~/code/linux/.output/arch/arm/boot
cat zImage dts/tegra30-grouper-bach.dtb > ~/code/linux/.zImage-dtb
cp ~/code/linux/.zImage-dtb "$TEMP"/zImage-dtb

pmbootstrap flasher list_devices
pmbootstrap chroot -- fastboot boot /tmp/mainline/zImage-dtb
# must be booted this way every boot, when it's booted or flashed with boot.img, it never work (not figured why 2019-11-28)
</syntaxhighlight>

Flashing rootfs under 650MB:
<syntaxhighlight lang="shell" line='line'>
pmbootstrap flasher flash_rootfs
</syntaxhighlight>

Flashing rootfs over 650MB to USERDATA:
<syntaxhighlight lang="shell" line='line'>
# start TWRP
adb push replace_with_exported_img_rootfs_file_ /
(computer) $ adb shell
(twrp) $ df #look for the data partition. should be something like /dev/block/mmcblk0p10 with /data next to it
(twrp) $ dd if=/replace_with_exported_img_rootfs_file_ of=/dev/block/mmcblk0p10 # mmcblk0p10 may be different for your Nexus version! 
</syntaxhighlight>

== Hardware ==
There is '''multiple hardware revisions''', so this status may not apply to all of them. This status apply for tilapia (Bach revision).
{|class="wikitable feature-colors"
! Status
! Hardware
! Info
|-
| Y
|Touchscreen
|works for me
|-
| Y
|USB
|Works.
|-
| Y
|SDHCI
|Works.
|-
| Y
|WiFi
|Wi-fi works.
|-
| Y
| GPIO keys
|There is 3 keys on GPIO: Power, Volume up, Volume down.
|-
| Y
| Battery
|Driver works.
|-
| P
| Charger
|there is driver for the charger in upstream kernel, but it doesn't have support for device-tree
|-
| ?
|Bluetooth
|Not tested yet.
|-
| Y
|Sound
|sound also works, but require ALSA UCM configuration (for now you'll need to enable DACs and etc using alsamixer)
alsamixer -c 0 "Stereo DAC MIXL DAC L1" - needs to be enabled
|-
| Y
|Temperature sensor
|temperature sensor works
|-
| Y
|Proximity sensor
|
|-
| N
|Front camera
|
|-
| N
|Modem
|present only on tilapia, no work started yet.
|-
|}

=== UI options ===
* Weston: Boots on legacy kernel. Touchscreen is working on legacy kernel. The reboot issue exists on legacy kernel. Maybe it is an issue with the kernel we are using?
* Phosh: Purism Librem 5 compositor and GNOME based environment. Flashed, work only with new kernel [https://github.com/grate-driver/linux Tegra-DRM]. SSH is working.

=== Development Notes ===

==== Kernel ====

* [https://wiki.ubuntu.com/Nexus7/Kernel This page] includes a list of changes to the Android kernel that are not present in mainline Linux. Many of them are probably currently mainlined.
* LineageOS kernel can be found [https://github.com/LineageOS/android_kernel_asus_grouper here] (currently used and compiled with gcc 6.1, with few patches a top), a newer kernel, can be found here: https://github.com/Unlegacy-Android
* Up-to-date [https://github.com/grate-driver/linux kernel], where tegra development ongoing.
* UART debugging through the headphone jack doesn't seem to work - apparently the 2012 version of the Nexus 7 does not have this feature.

* The default images for android provided by google have the bootloader broken, meaning it can't be flashed. It does not seem to affect the install process of PostmarketOS, but is something to take into account. If you need a working bootloader image version 4.23 can be found [[https://drive.google.com/file/d/1eVEQJtrByuAYRmS924-BAMGQcRXuBj7C/view?usp=sharing| here]]

==== Graphics ====

* CONFIG_VT had to be enabled for graphics to work. In menuconfig this is located under Device Drivers -&gt; Character devices -&gt; Virtual terminal.
* <s>/sys/class/graphics/fb0/mode is empty on boot, it must have U:800x1280p-0. This uses the same initfs hook as many other devices.</s> '''Update:''' Seems to be correctly set now
* weston with fbdev-backend.so uses pixman-type=3 (PIXMAN_TYPE_ABGR), which now does not require configuration.
* The touchscreen input device is named <code>elan-touchscreen</code>.

==== Wifi ====

* The wifi chip is the Broadcom 4330.
* This device was once officially supported on Ubuntu, so it has a firmware package in the [https://packages.ubuntu.com/trusty/linux-firmware-nexus7 Ubuntu repositories]
* "Desktop" Linux firmware are outdated. Check [https://android.googlesource.com/platform/hardware/broadcom/wlan/+/master/bcmdhd/firmware/bcm4330/ here] for latest one.
* It is possible to manually get wifi working by manually copying fw_bcmdhd.bin and nvram.txt to their kernel-specified locations and configuring <code>/etc/network/interfaces</code>. At this point, running <code>/etc/init.d/networking restart</code>, gave an error about being unable to get a MAC address. After restarting the device to find that wifi Just Workedâ„¢, it was possible to successfully scan for wireless networks and establish a connection to secured wireless APs.
* There's a proper firmware subpackage now, wifi device should work out-of-the box. 
* To connect follow the instructions on [[WiFi#Using_NetworkManager|this page.]]

=== Pending Issues ===

* {{issue|201|pmaports}}: device seems to reboot spontaneously under heavy load (could be a hardware problem though, needs more testing).
* {{issue|1422|pmbootstrap}}: The <code>system</code> partition is too small to hold rootfs images over 650Mb (e.g. Plasma Mobile is about 1.1Gb). Flashing to <code>userdata</code> partition fails.
* {{issue|1844|pmbootstrap}}: grouper: move to grate (upstream close) kernel

==== See also ====

These are other pending issues that are related to this device:

* {{issue|60|pmbootstrap}}: Use the system and userdata partition on Android with LVM

=== Fun Fact ===

''<code>grouper</code> was the first tablet to run pmOS!''

''<code>tilapia</code> has exactly same HW as <code>grouper</code>''
