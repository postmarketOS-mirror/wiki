{{Infobox device
| manufacturer = Google (ASUS)
| name = Nexus 7 (2012)
| codename = asus-grouper & asus-tilapia
| image = File:Nexus7_grouper_gnome_maps.jpeg
| imagecaption = Google Nexus 7
| releaseyear = 2012
| originalsoftware = Android 4.1.2 on Linux 3.0
| chipset = Nvidia Tegra 3
| cpu = Quad-core 1.2 GHz Cortex-A9
| gpu = ULP GeForce
| storage = 8/16/32 GB
| display = 800x1280 IPS
| memory = 1 GB
| architecture = armv7
| status_usbnet = Y
| status_flashing = Y
| status_touch = Y
| status_screen = Y
| status_wifi = Y
| status_xwayland = Y
| status_fde = 
| status_mainline = Y
| status_battery = Y
| status_3d = P
| status_accel = 
| status_audio = Y
| status_bluetooth = Y
| status_camera =
| status_gps = 
| status_mobiledata = -
| status_sms = -
| status_calls = -
| booting = yes
}}
== Maintainer(s) ==
* okias

== Contributors ==
* antonok
* pangelo

=== Users owning this device ===
{{Device owners}}

== Flashing ==
=== How to enter flash mode ===
* Connect a USB cable
* Power the device off
* Hold power + volume down
* <code>fastboot</code> should work when the green android appears on the screen

=== Installation process (legacy kernel) ===
'''WARNING:''' Legacy kernel has reboot issues. Once it's merged, '''please use mainline kernel'''!
<syntaxhighlight lang="shell" line='line'>
$ pmbootstrap init # choose asus-grouper
$ pmbootstrap install
$ pmbootstrap flasher flash_kernel
</syntaxhighlight>

=== Special installation process (development setup, kernel over approx. 4M) ===

If you need bigger kernel, this includes way to the latest mainline kernel with size limited only by BOOT partition or how much device will be able boot it:

<syntaxhighlight lang="shell" line='line'>
mkdir ~/code
cd ~/code
git clone https://gitlab.com/alpine-mobile/pmbootstrap.git
cd pmbootstrap
alias pmbootstrap=~/code/pmbootstrap/pmbootstrap.py
pmbootstrap init
# pmbootstrap initfs hook_add debug-shell # not required, only for debugging
pmbootstrap export
pmbootstrap chroot -- apk add abootimg android-tools mkbootimg dtbtool findutils
export DEVICE="$(pmbootstrap config device)"
export WORK="$(pmbootstrap config work)"
export TEMP="$WORK/chroot_native/tmp/mainline/"
mkdir -p "$TEMP"

cd ~/code
git clone https://github.com/okias/linux.git
cd linux
source ~/code/pmbootstrap/helpers/envkernel.sh

sudo curl -o .output/.config https://gitlab.com/alpine-mobile/pmaports/raw/master/device/linux-asus-grouper/config-asus-grouper.armv7
sudo sed -i "s|CONFIG_INITRAMFS_SOURCE=\"\"|CONFIG_INITRAMFS_SOURCE=\"initfs-extracted\"|" .output/.config
pmbootstrap initfs extract # ugly hack to get kernel booting without external initrd
sudo cp -r ~/.local/var/pmbootstrap/chroot_rootfs_asus-grouper/tmp/initfs-extracted ./.output/ # initfs is later compiled into kernel

make -j5

cd ~/code/linux/.output/arch/arm/boot
cat zImage dts/tegra30-grouper-bach.dtb > ~/code/linux/.zImage-dtb
cp ~/code/linux/.zImage-dtb "$TEMP"/zImage-dtb

pmbootstrap flasher list_devices
</syntaxhighlight>
===== a. Boot only =====
<syntaxhighlight lang="shell" line='line'>
pmbootstrap chroot -- fastboot boot /tmp/mainline/zImage-dtb
</syntaxhighlight>
===== b. Flash kernel: =====
We're still not able bundle classic boot.img, so we need generate boot.img without ramdisk (which is already included inside kernel).
<syntaxhighlight lang="shell" line='line'>
pmbootstrap chroot -- mkbootimg-osm0sis --kernel "/tmp/mainline/zImage-dtb" --base "0x10000000" --kernel_offset "0x00008000" --ramdisk_offset "0x01000000" --tags_offset "0x00000100" --pagesize "2048" -o "/tmp/mainline/boot.img"
pmbootstrap chroot -- fastboot boot /tmp/mainline/boot.img # test if image will boot
pmbootstrap chroot -- fastboot flash boot /tmp/mainline/boot.img # flash only tested image
</syntaxhighlight>

=== Flashing rootfs ===
==== rootfs under 650MB ====
<syntaxhighlight lang="shell" line='line'>
pmbootstrap flasher flash_rootfs
</syntaxhighlight>

==== rootfs over 650MB to USERDATA ====
''NOTE: If you plan flash Android, this may change size of your data partition. You can fix it by resizing partition in TWRP before flashing Android.''

'''You should proceed very carefully here.'''

Prerequisites: Official TWRP, at least version 3.3.1-0, binaries are here for [https://dl.twrp.me/grouper/ grouper] or [https://dl.twrp.me/tilapia/ tilapia].

ensure you already run
<syntaxhighlight lang="shell" line='line'>
pmbootstrap export
</syntaxhighlight>
and then proceed with
<syntaxhighlight lang="shell" line='line'>
# start TWRP
(computer) $ adb shell
(twrp) $ df # look for the data partition. should be something like /dev/block/mmcblk0p9 or p10 with /data next to it
(twrp) $ umount /dev/block/mmcblk0p__ <- fill partition number
(twrp) $ umount /dev/block/mmcblk0p__ <- fill partition number # again, it can be mounted as /sdcard and as /data
(computer again) $ adb push /tmp/postmarketOS-export/asus-grouper.img /dev/block/mmcblk0p__ <- fill partition number
</syntaxhighlight>
* grouper has likely data on /dev/block/mmcblk0<span style="color: #00aa00">p9</span> '''but make sure!'''
* tilapia has likely data on /dev/block/mmcblk0<span style="color: #00aa00">p10</span> '''but make sure!'''
it's probably because tilapia has additional modem partition. If you're not sure, come to our Matrix channel and ask :)

== Hardware status (mainline) ==
There is '''multiple hardware revisions''', so this status may not apply to all of them. This status apply for tilapia (Bach revision).
{|class="wikitable feature-colors"
! Status
! Hardware
! Info
|-
| Y
|Booting
|... but when is kernel larger than approx 4MB, initfs must be packed directly inside kernel (not into boot.img as usual), otherwise kernel won't boot. With downstream kernel it works.
|-
| Y
|Touchscreen
|Works.
|-
| Y
|USB
|Works.
|-
| Y
|SDHCI
|Works.
|-
| Y
|NFC
|wired, not tested yet. Please update if it'll work for you.
|-
| 
|GPS
|Needs entry in DeviceTree. Not tried yet.
|-
| Y
|WiFi
|Wi-Fi works (best with IWD daemon: apk add iwd; rc-config del wpa_supplicant; rc-config add iwd; and [https://wiki.archlinux.org/index.php/NetworkManager#Using_iwd_as_the_Wi-Fi_backend HOWTO]). 
|-
| Y
| GPIO keys
|There is 3 keys on GPIO: Power, Volume up, Volume down.
|-
| Y
| Battery
|Driver works.
|-
| P
| Charger
|there is driver SMC347 (also compatible with SMC345 and SMC358) for the charger in upstream kernel, but it doesn't have support for device-tree. Patches for upstreaming: https://github.com/okias/linux/commits/smb3xx-charger
|-
| Y
|Bluetooth
|Works well, it has even BT 4.0, also BT 5.0 headphones works.
|-
| Y
|Sound
|sound also works, but require ALSA UCM configuration (for now you'll need to enable DACs and etc using alsamixer)
alsamixer -c 0 # and enable something like:
"Speaker R"
"Speaker L"
"DAC MIXR INF1"
"DAC MIXL INF1"
"SPOL MIX DAC R1"
"SPOL MIX DAC L1"
"Stereo DAC MIXR DAC R1"
"Stereo DAC MIXL DAC L1"
|-
| Y
|Temperature sensor
|temperature sensor works
|-
| Y
|Proximity sensor
|
|-
| Y
|Light sensor
|Driver al3010. Brightness regulation [https://floss.social/@okias/103371284828595026 works], install iio-sensor-proxy . It's slightly [https://gitlab.com/alpine-mobile/pmaports/issues/3 oversensitive].
|-
| N
|Front camera
|
|-
| P
|3D support
| See [[Nvidia_Tegra_2_(tegra20)#Graphics]]
|-
| N
|Modem
|Present only on tilapia, no-one plan to work on it for now. 
|-
|}

== UI options ==
* Phosh (mainline only): Purism Librem 5 compositor and GNOME based environment, needs performance optimization, but works.
* Xfce4 (mainline only): Xfce4 is a GTK-based desktop environment aiming to be fast and lightweight. Needs performance optimization, but works. Follow the guide at https://wiki.postmarketos.org/wiki/XFCE4 for adjustments.
* <span style="color:#777777">Weston (on legacy): Boots on legacy kernel. Touchscreen is working.</span>

== Development Notes ==

==== Kernel ====

* Up-to-date [https://github.com/grate-driver/linux kernel], where tegra development ongoing.
* <span style="color:#777777">Old Android kernels: [https://github.com/LineageOS/android_kernel_asus_grouper LineageOS kernel sources] [https://github.com/Unlegacy-Android Unlegacy kernel sources]</span>
* <span style="color:#777777">[https://wiki.ubuntu.com/Nexus7/Kernel Ubuntu Nexus 7 Kernel wiki] (old, last updated 2012)</span>
* The default images for android provided by google have the bootloader broken, meaning it can't be flashed. It does not seem to affect the install process of PostMarketOS, but is something to take into account. If you need a working bootloader image version 4.23 can be found [[https://drive.google.com/file/d/1eVEQJtrByuAYRmS924-BAMGQcRXuBj7C/view?usp=sharing| here]], or can be 4.18 can be grabbed from the factory images for KitKat

==== Graphics ====

* The touchscreen input device is named <code>elan-touchscreen</code>.
* <span style="color:#777777">(legacy) CONFIG_VT had to be enabled for graphics to work. In menuconfig this is located under Device Drivers -&gt; Character devices -&gt; Virtual terminal.</span>
* <span style="color:#777777">(legacy) <s>/sys/class/graphics/fb0/mode is empty on boot, it must have U:800x1280p-0. This uses the same initfs hook as many other devices.</s> '''Update:''' Seems to be correctly set now</span>
* <span style="color:#777777">(legacy) weston with fbdev-backend.so uses pixman-type=3 (PIXMAN_TYPE_ABGR), which now does not require configuration.</span>

==== Wifi ====

* There's a proper firmware subpackage now, wifi device should work out-of-the box. 
* "Desktop" Linux firmware are outdated. Check [https://android.googlesource.com/platform/hardware/broadcom/wlan/+/master/bcmdhd/firmware/bcm4330/ here] for latest one.
* To connect follow the instructions on [[WiFi#Using_NetworkManager|this page.]]
* <span style="color:#777777">(legacy)It is possible to manually get wifi working by manually copying fw_bcmdhd.bin and nvram.txt to their kernel-specified locations and configuring <code>/etc/network/interfaces</code>. At this point, running <code>/etc/init.d/networking restart</code>, gave an error about being unable to get a MAC address. After restarting the device to find that wifi Just Workedâ„¢, it was possible to successfully scan for wireless networks and establish a connection to secured wireless APs.</span>

=== Pending Issues ===

* {{issue|60|pmbootstrap}}: Use the system and userdata partition on Android with LVM
* {{issue|1422|pmbootstrap}}: The <code>system</code> partition is too small to hold rootfs images over 650Mb (e.g. Plasma Mobile is about 1.1Gb). Flashing to <code>userdata</code> partition fails.
* [https://gitlab.com/alpine-mobile/pmaports/tree/master/device Merge stuff from Alpine-Mobile (tegra-stuff) back to postmarketOS.]
* <span style="color:#777777">{{issue|201|pmaports}}: With legacy kernel, device seems to reboot spontaneously under heavy load. For better experience, please use mainline kernel.</span>


== Fun Fact ==

''<code>grouper</code> was the first tablet to run postmarketOS!''

== See also ==
- dmesg logs from various tegra devices https://paste.sr.ht/%7Eokias
