{{Infobox device
| manufacturer = Vernee
| name = Thor
| codename = vernee-k506
| image = File:verne-k506.jpg
| imagecaption = pmOS splash
| releaseyear = 2016
| originalsoftware = Android 6.0
| chipset = MediaTek MT6753
| cpu = Octa-core Cortex-A53 1.3GHz
| gpu = Mali-T720 MP3
| storage = 16GB
| display = 5" IPS 720x1280
| memory = 3GB
| architecture = aarch64
<!-- the following status_* questions should be answered with Y - yes, P - partial, N - no, or left blank (for untested or unknown) -->
| status_usbnet = Y
| status_flashing = P
| status_touch = Y
| status_screen = Y
| status_wifi = P
| status_xwayland = N
| status_fde = 
| status_mainline = N
| status_battery = 
| status_3d = N
| status_accel = 
| status_audio = N
| status_bluetooth = N
| status_camera = N
| status_gps = N
| status_mobiledata = N
| status_sms = N
| status_calls = N
| status = 
| booting = yes
| pmoskernel = 3.18.99
<!-- you can also use these lines if you need to:
if the device haven't originally ran Android OS, e.g. Nokia N900
| n-android =  âœ”
see Unixbench page on wiki
| whet_dhry = 0.0
Is OTG available, not used in wiki
| status_otg = -
-->
}}

== Contributors ==
* [[user:Dahrkael|Dahrkael]]

== Maintainer(s) ==
<!-- Only if this device doesn't run on linux-postmarketos yet! -->

== Users owning this device ==
{{Device owners}}
<!-- autogenerated, use {{Owns device|devicepage|notes}} on your profile page -->
<!-- use _ instead of spaces in device page name, e.g. {{Owns device|HTC_Desire_(htc-bravo)|custom notes}}-->
<!-- you may need to purge page cache to see changes (more->purge cache)-->
<!-- you can use {{My devices}} on your profile page to show table with all your devices -->

== How to enter flash mode ==
* '''Recovery:''' Power on the device with both {{Button|Power}}  and {{Button|Volume Up}} buttons. Then select ''Recovery'' pressing {{Button|Volume Up}} and confirm with {{Button|Volume Down}}.
* '''Fastboot:''' Do the same as for Recovery, but select the ''Fastboot'' option in the menu.
* '''MediaTek Preloader:''' The preloader triggers automatically everytime the phone turns on or reboots.

== Installation ==
Fastboot doesn't allow flashing on this phone.

pmOS can be installed either using a ''Recovery ZIP'' through '''TWRP''' or using MediaTek's '''SP Flash Tool'''.

=== Unlock the bootloader ===
# Enable Developer Mode in Android tapping 5 times the <code>Build Number</code> in <code>Settings -> About Phone</code>.
# Then go to <code>Settings -> Developer Options</code> and tap <code>OEM Unlock</code>.
=== Install using Recovery ZIP ===
Follow the [[Installation_from_recovery_mode|Installation from recovery mode]] guide.
=== Install using SP Flash Tool ===
# Export the pmOS files running <code>pmbootstrap install && pmbootstrap export</code>
# Open '''SP Flash Tool'''.
# Select the [https://pastebin.com/aUfY5kPk MT6753 scatter file].
# Asign <code>boot.img-vernee-k506</code> to partition '''boot''' and <code>vernee-k506.img</code> to partition '''system'''
# Click {{Button|Download}} and turn on/restart the phone. It will automatically flash the files.

== SoC features ==
WiFi, Bluetooth, GPS and FM Radio are all integrated into the SoC and need to be initialized all at the same time.

To do this the proprietary firmware files matching the kernel need to be copied into <code>/lib/firmware/postmarketos</code>.


To initialize the chip and drivers MediaTek provides two proprietary programs:
* '''wmt_loader:''' initializes the chip and starts the drivers.
* '''6620_launcher (or connsys_launcher):''' finds and loads the firmware files into their respective chips.
These tools are not officially available outside Android, but there are source code versions available that do work.

In the case of the Vernee Thor all the required connectivity drivers are compiled into the kernel, so theres no need to load them prior to executing these programs.
# Execute <code>sudo ./wmt_loader</code> without parameters. ''/dev/wmtDetect'' should appear.
# Execute <code>sudo ./6620_launcher -p /lib/firmware/postmarketos</code>. This program needs to keep running, so better send it to background with <code>&</code>.

If it worked now there should be a bunch of ''/dev/stp*'' entries and ''/dev/wmtWifi''.

For debugging use <code>dmesg | grep wmt</code>. Execute <code>sysctl -w kernel.printk=7</code> to improve verbosity.

'''Caution:''' the phone will crash if '''wmt_loader''' runs twice.

=== WiFi ===
To get WiFi working first initialize the chip and driver.
# Execute <code>sudo chmod 644 /dev/wmtWifi</code>
# Execute <code>sudo echo "1" > /dev/wmtWifi</code>
# Check with <code>ifconfig</code> that the interface ''wlan0'' appeared

To connect to a network:
# Bring the interface up: <code>ifconfig wlan0 up</code>
# Scan to find out what WiFi networks are detected: <code>iw dev wlan0 scan</code>
# Connect to WPA/WPA2 WiFi network: <code>wpa_passphrase SSID PASS &gt;&gt; /etc/wpa_supplicant/wpa_supplicant.conf</code>
# Start wpa_supplicant to connect to the network: <code>wpa_supplicant -B -D nl80211 -i wlan0 -c /etc/wpa_supplicant/wpa_supplicant.conf</code>
# Verify that you are indeed connected to the SSID: <code>iw wlan0 link</code>
# Start udhcpc to get an ip address: <code>udhcpc -b -i wlan0</code>

If everything seems fine but theres no network traffic (<code>ping postmarketos.org</code> doesn't work) it probably means the firmware files are not the correct ones.

== See also ==
* [https://www.needrom.com/download/twrp-thor/ TWRP 3.0.2 ROM for Vernee Thor]

* {{MR|1439|pmaports}} Initial merge request
* {{MR|1456|pmaports}} Firmware merge request
* {{Device package|vernee-k506}}
* {{Kernel package|vernee-k506}}
