== Install MATE Desktop ==
{{note|This is a draft, installation will be as easy as selecting "mate" in pmbootstrap init, once a postmarketos-ui-mate package is created with the information from below. Contributions welcome - it is not that hard, simply look at the other postmarketos-ui- packages and make a PR.}}

<pre>
sudo su
setup-xorg-base
</pre>
Now let us install a bunch of needed packages what includes all MATE Desktop packages avaliable in the repository:

<pre>
apk add desktop-file-utils gtk-engines consolekit gtk-murrine-engine caja caja-extensions marco dbus lxdm udev hicolor-icon-theme sudo
mate_pkgs=$(apk search mate -q | grep -v '\-dev' | grep -v '\-lang' | grep -v '\-doc')
apk add $mate_pkgs
</pre>

In the next step we add some services to start up with the operating system:
<pre>
rc-update add lxdm
rc-update add dbus
rc-update add udev
apk add dbus-x11
</pre>
We will start D-Bus before other services in order to fix D-Bus configuration file (replace the hard coded 'system_bus_socket' path):
Starting D-Bus:
<pre>
rc-service dbus start
</pre>
Fixing the  D-Bus configuration file:
<pre>
dbus_sock_path=$(find / -name system_bus_socket)
dbus_sock_path=$(echo $dbus_sock_path | sed 's/\//\\&/g')
sed -i 's/\/var\/run\/dbus\/system_bus_socket/'$dbus_sock_path'/' /etc/dbus-1/system.conf
</pre>
<pre>
apk del mate-screensaver
ln -s /usr/etc/xdg/menus/ /etc/xdg/menus
apk add mate-screensaver
</pre>
Adding avaliables True Type Fonts:
<pre>
ttfs=$(apk search -q ttf- | grep -v '\-doc')
apk add $ttfs
</pre>
Configure lxdm with autologin:
<pre>
nano /etc/lxdm/lxdm.conf
autologin=yourusername
session=/usr/bin/mate-session
skip_password=1
</pre>
And finally, let us start the lxdm service and log in to our MATE Desktop. If it does not boot - reboot the device and you should be auto logged into MATE.
<pre>
rc-service lxdm start
</pre>

=== Calibrating the touchscreen ===

If you want to rotate the screen change/add a value in this file and reboot udev or the device:
<pre>
sudo nano /etc/udev/rules.d/90-android-touch-dev.rules
</pre>
<pre>
ENV{ID_INPUT}="1", ENV{ID_INPUT_TOUCHSCREEN}="1", \
# default			ENV{LIBINPUT_CALIBRATION_MATRIX}="1 0 0 0 1 0"
# Left - 90 degree clockwise	ENV{LIBINPUT_CALIBRATION_MATRIX}="0 -1 1 1 0 0"
# 180 degree clockwise		ENV{LIBINPUT_CALIBRATION_MATRIX}="-1 0 1 0 -1 1"
# Right - 270 degree clockwise	ENV{LIBINPUT_CALIBRATION_MATRIX}="0 1 0 -1 0 1"
# reflect along y axis		ENV{LIBINPUT_CALIBRATION_MATRIX}="-1 0 1 1 0 0"
</pre>
[[Category:Interface]]
