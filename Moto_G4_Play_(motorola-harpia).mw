{{Infobox device
| manufacturer = Motorola
| name =  Moto G4 Play
| codename = motorola-harpia
| image = File:Motorola_Moto_G4_Play.png
| imagecaption = Moto G4 Play running Weston
| releaseyear = 2016
| originalsoftware = Android 6.0.1
| chipset = Qualcomm MSM8916 Snapdragon 410
| cpu = Quad-core 1.21GHz Cortex A53
| gpu = Adreno 306
| storage = 8GB or 16GB
| display = HD (720x1280)
| memory = 1GB or 2GB
| architecture = aarch64
| status_usbnet = Y
| status_flashing = Y
| status_touch = Y
| status_screen = Y
| status_wifi = Y
| status_xwayland = Y
| status_fde = 
| status_mainline = Y
| status_battery =
| status_3d = Y
| status_accel = Y
| status_audio = Y
| status_bluetooth = Y
| status_camera = N
| status_gps = N
| status_mobiledata = N
| status_sms = Y
| status_calls = P
| booting = yes
}}

== Users owning this device ==
{{Device owners}}

== Contributors ==
* Sorixelle

== How to enter flash mode ==
Hold down POWER + Vol Down while booting to enter Flash Mode.

== Installation ==
As some features are still in development for this device, the kernel needs to be built from source using envkernel. To do this, you'll need a copy of
the [https://gitlab.com/postmarketOS/pmbootstrap/ pmbootstrap tree], and the [https://github.com/msm8916-mainline/linux latest kernel tree]
for the device. Once you have those, and you have run <code>pmbootstrap init</code>, run the following commands:

<source>
cd /path/to/linux/kernel
source /path/to/pmbootstrap/helpers/envkernel.sh
make msm8916_defconfig pmos.config
make -j<cores>
pmbootstrap build --envkernel linux-postmarketos-qcom-msm8916
</source>

You will also need to install the [https://github.com/msm8916-mainline/lk2nd/releases/latest lk2nd bootloader], as it is required to handle some quirks
with msm8916 devices on mainline kernels. Flash the <code>lk2nd.img</code> image to the boot partition with <code>fastboot flash boot /path/to/lk2nd.img</code>. lk2nd
also provides a fastboot interface that allows for flashing kernels without overwriting lk2nd itself. To enter it, power on the device, then hold down Vol Down as soon
as you see the boot splash. You should be presented with a menu that looks like the following:

[[File:Motorola-harpia_lk2nd_example.jpeg|x500px]]

After that, proceed with [[Installation_guide#Installation_and_flashing|installation]] as usual, using lk2nd's fastboot interface to flash the kernel and rootfs.

=== Modem ===
Modem is currently working on harpia, but as of writing, a few things are still waiting to be merged into pmaports. See [https://gitlab.com/postmarketOS/pmaports/-/merge_requests/907 pmaports!907]
for more information. This section will be removed once the required changes are merged into pmaports.

'''Following these directions is not recommended until the required changes are in pmaports.''' If you would like to get modem working now, proceed with the above install guide, with the following
modifications:

* Use the <code>harpia-modem</code> branch of [https://gitlab.com/srxl/pmaports/-/tree/harpia-modem this] fork of pmaports:
<source>
cd ~/.local/var/pmbootstrap/cache_git/pmaports
git remote add harpia-modem https://gitlab.com/srxl/pmaports.git
git fetch harpia-modem
git checkout harpia-modem
</source>
* lk2nd needs to be built from source, as there are some required changes that have not been added to a release yet. The [https://github.com/msm8916-mainline/lk2nd#building README] on the lk2nd repo has instructions on how to do this.

== Usage ==
=== Modem ===
Follow the directions on [[Qualcomm_Snapdragon_410_(MSM8916)#Modem|this wiki page]] to use the modem. If you have a device model other than what is listed here, please edit the list below
with the results of modem functionality testing.

* '''XT1602:''' Modem working, can send and receive text messages. Can initiate and answer phone calls, but no audio. Mobile data does not work.

== See also ==
* [https://gitlab.com/postmarketOS/pmaports/tree/master/device/device-motorola-harpia Device package]
* [https://github.com/msm8916-mainline/linux Development kernel tree]
